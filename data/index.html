
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://seanangio.github.io/nps-hikes/data/">
      
      
        <link rel="prev" href="../getting-started/">
      
      
        <link rel="next" href="../api-tutorial/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>Data Sources and Schema - NPS Hikes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#data-sources-and-schema" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="NPS Hikes" class="md-header__button md-logo" aria-label="NPS Hikes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NPS Hikes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Data Sources and Schema
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/seanangio/nps-hikes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="NPS Hikes" class="md-nav__button md-logo" aria-label="NPS Hikes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    NPS Hikes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/seanangio/nps-hikes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Data Sources and Schema
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Sources and Schema
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#external-sources" class="md-nav__link">
    <span class="md-ellipsis">
      
        External sources
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="External sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#national-park-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        National Park Service
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openstreetmap" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenStreetMap
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-national-map" class="md-nav__link">
    <span class="md-ellipsis">
      
        The National Map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usgs-elevation-point-query-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        USGS Elevation Point Query Service
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coordinate-systems" class="md-nav__link">
    <span class="md-ellipsis">
      
        Coordinate systems
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#internal-sources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Internal sources
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Internal sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#park-visit-log" class="md-nav__link">
    <span class="md-ellipsis">
      
        Park visit log
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google-my-maps-kml-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Google My Maps KML files
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        Database schema
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-tables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core tables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key features
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using the API
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#external-sources" class="md-nav__link">
    <span class="md-ellipsis">
      
        External sources
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="External sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#national-park-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        National Park Service
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openstreetmap" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenStreetMap
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-national-map" class="md-nav__link">
    <span class="md-ellipsis">
      
        The National Map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usgs-elevation-point-query-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        USGS Elevation Point Query Service
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coordinate-systems" class="md-nav__link">
    <span class="md-ellipsis">
      
        Coordinate systems
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#internal-sources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Internal sources
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Internal sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#park-visit-log" class="md-nav__link">
    <span class="md-ellipsis">
      
        Park visit log
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google-my-maps-kml-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Google My Maps KML files
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        Database schema
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-tables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core tables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key features
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="data-sources-and-schema">Data Sources and Schema</h1>
<h2 id="external-sources">External sources</h2>
<p>The project collects data from the following APIs.</p>
<h3 id="national-park-service">National Park Service</h3>
<p>The <a href="https://www.nps.gov/subjects/developer/">NPS API</a> requires a free API key, and provides park metadata and boundary geometries.</p>
<ul>
<li>The collector queries the <code>/parks</code> endpoint for park names, codes, designations, coordinates, descriptions, and contact information, filtering for National Park designations.</li>
<li>A second pass fetches GeoJSON boundary polygons from the <code>/mapdata/parkboundaries/{park_code}</code> endpoint. The collector standardizes boundaries to MultiPolygon format with bounding boxes calculated for downstream spatial queries.</li>
</ul>
<h3 id="openstreetmap">OpenStreetMap</h3>
<p>The pipeline collects trail geometries from <a href="https://www.openstreetmap.org/">OpenStreetMap</a> via the Overpass API using the <code>osmnx</code> library. Note that the collector:</p>
<ul>
<li>Queries for paths and footways (<code>highway=path|footway</code>) within each park's boundary polygon.</li>
<li>Retains named trails only.</li>
<li>Aggregates segments sharing the same name into single MultiLineString records.</li>
<li>Calculates trail lengths in miles using a projected coordinate system <code>EPSG:5070</code>.</li>
<li>Clips trails to the park boundary before storage.</li>
</ul>
<h3 id="the-national-map">The National Map</h3>
<p><a href="https://www.usgs.gov/programs/national-geospatial-program/national-map">The National Map</a> provides official USGS trail data through an ArcGIS REST endpoint. The collector queries using each park's bounding box and returns trail geometries along with detailed attributes: trail type, trail number, length, and use flags (hiker, bicycle, pack/saddle, cross-country ski, etc.). Like OSM trails, the collector aggregates segments by name, clips to the park boundary, and recalculates lengths in the projected CRS.</p>
<h3 id="usgs-elevation-point-query-service">USGS Elevation Point Query Service</h3>
<p>The <a href="https://apps.nationalmap.gov/epqs/">USGS EPQS</a> returns elevation in meters for individual latitude/longitude coordinates. The collector samples points along matched trail geometries at regular intervals (default 50 meters) and queries the service for each point. The collector caches results locally to avoid redundant API calls. A three-stage validation pipeline checks API responses, individual point values, and the complete elevation profile. It treates the USGS sentinel value of <code>-1,000,000</code> as missing data.</p>
<h3 id="coordinate-systems">Coordinate systems</h3>
<p>All geographic data uses <code>EPSG:4326 (WGS84)</code>. Length calculations use <code>EPSG:5070 (NAD83/Conus Albers)</code> for accurate distance measurements in meters.</p>
<h2 id="internal-sources">Internal sources</h2>
<p>For the following two sources, you can replace the author's files with your own.</p>
<h3 id="park-visit-log">Park visit log</h3>
<p>A CSV file (<code>raw_data/park_visit_log.csv</code>) recording which national parks you've visited, with park name, month, and year. The NPS collector uses this to tag parks as visited or unvisited, enabling filtered queries through the API. See <a href="../getting-started/#park-visit-log">Park visit log</a> for formatting details.</p>
<h3 id="google-my-maps-kml-files">Google My Maps KML files</h3>
<p>KML files exported from <a href="https://www.google.com/maps/d/">Google My Maps</a> containing named hiking location points, organized into layers by 4-letter park code. The pipeline imports these points, matches them to the nearest trail geometries from TNM or OSM, and then collects elevation profiles for the matched trails. See <a href="../getting-started/#google-my-maps-hiking-data">Google My Maps hiking data</a> for export instructions.</p>
<h2 id="database-schema">Database schema</h2>
<h3 id="core-tables">Core tables</h3>
<p>The pipeline orchestrator creates the following tables:</p>
<table>
<thead>
<tr>
<th>Table</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>parks</strong></td>
<td>Park metadata (codes, names, coordinates, descriptions, visit dates)</td>
</tr>
<tr>
<td><strong>park_boundaries</strong></td>
<td>Spatial boundaries as MultiPolygon geometries in WGS84</td>
</tr>
<tr>
<td><strong>osm_hikes</strong></td>
<td>Aggregated trail geometries from OpenStreetMap (segments with same name combined into MultiLineString)</td>
</tr>
<tr>
<td><strong>tnm_hikes</strong></td>
<td>Trail data from The National Map with detailed trail characteristics</td>
</tr>
<tr>
<td><strong>gmaps_hiking_locations</strong></td>
<td>Google Maps hiking location points with coordinates</td>
</tr>
<tr>
<td><strong>gmaps_hiking_locations_matched</strong></td>
<td>Matched locations with trail correlation results</td>
</tr>
<tr>
<td><strong>usgs_trail_elevations</strong></td>
<td>Elevation profile data for matched trails</td>
</tr>
</tbody>
</table>
<h3 id="key-features">Key features</h3>
<ul>
<li>Spatial indexing with PostGIS GIST indexes for performance</li>
<li>Foreign key relationships for data integrity across tables</li>
<li>Composite primary keys for trail uniqueness (<code>park_code</code> + <code>osm_id</code>)</li>
<li>Coordinate validation with proper range constraints</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["content.code.copy", "navigation.instant", "navigation.top", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>